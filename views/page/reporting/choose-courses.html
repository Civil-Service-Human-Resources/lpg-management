{% from "../../component/reporting/macro.njk" import reporting with context %}
{% from "radios/macro.njk" import govukRadios %}
{% from "select/macro.njk" import govukSelect %}
{% from "button/macro.njk" import govukButton %}
{% from "checkboxes/macro.njk" import govukCheckboxes %}

{% extends "../../component/Page.njk" %}

{% block pageTitle %}{{i18n['proposition_name'] }}{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <span class="govuk-caption-m">Reporting</span>
    <h1 class="govuk-heading-l">{{ pageTitle }}</h1>
    <form method="post" action="/reporting/course-completions/choose-courses">
      {% set requiredHtml %}
        {{ govukCheckboxes({
          name: "required-learning",
          classes: "govuk-checkboxes--small",
          fieldset: {
            legend: {
              text: "Required learning"
            }
          },
          items: [	pageModel.requiredLearning,
            {
              "divider": "or"
            },
            {
              "value": "all",
              "text": "All required learning",
              "behaviour": "exclusive"
            }]
        }) }}
      {% endset -%}
      {{ govukRadios({
        name: "learning",
        fieldset: {
          legend: {
            text: "What courses would you like to report on?",
            classes: "govuk-fieldset__legend--s"
          }
        },
        items: [
          {
            value: "required-learning",
            text: "Required learning for " + pageModel.userDepartment,
            conditional: {
            html: requiredHtml
          },
            checked: true
          },
          {
            value: "all-learning",
            text: "All learning"
          }
        ]
      }) }}
      {{ govukButton({
        text: "Continue"
      }) }}
    </form>
  </div>
</div>
{% endblock %}

{% block bodyEnd %}
    <script src="/govuk-frontend/all.js"></script>
    <script>window.GOVUKFrontend.initAll()</script>
    <script type="text/javascript" src="/js/accessible-autocomplete.min.js"></script>
    <script type="text/javascript" src="/js/manage-orgs.js"></script>
{% endblock %}
