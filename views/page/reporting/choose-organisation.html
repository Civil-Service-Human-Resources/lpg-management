{% from "../../component/reporting/macro.njk" import reporting with context %}
{% from "radios/macro.njk" import govukRadios %}
{% from "select/macro.njk" import govukSelect %}
{% from "button/macro.njk" import govukButton %}

{% extends "../../component/Page.njk" %}

{% block pageTitle %}Reporting - Choose organisation - {{i18n['proposition_name'] }}{% endblock %}

{% block content %}

<div class="govuk-grid row">
  <div class="govuk-column-full">
    <h1 class="govuk-heading-l">{{pageTitle}}</h1>
  </div>
</div>
<div class="govuk-grid row">
  <div class="govuk-column-one-third">
    <div class="govuk-form-group">
      <form action="/reporting/course-completions/choose-organisation" method="post">
        <fieldset class="govuk-fieldset" aria-describedby="organisation-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <h1 class="govuk-fieldset__heading">
              Select an organisation
            </h1>
          </legend>
          <div id="organisation-hint" class="govuk-hint">
            Which organisation would you like to report on?
          </div>
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="main-organisation" name="organisation" type="radio"
                value={{ firstOrganisationOption.id }} data-aria-controls="conditional-main-organisation">
              <label class="govuk-label govuk-radios__label" for="main-organisation">
                {{ firstOrganisationOption.name }}
              </label>
            </div>
            {% if showTypeaheadOption %}
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="organisation-2" name="organisation" type="radio" value="other"
                data-aria-controls="conditional-organisation-2">
              <label class="govuk-label govuk-radios__label" for="organisation-2">
                Other organisations
              </label>
            </div>
            <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-organisation-2">
              <div class="govuk-form-group">
                <label class="govuk-label" for="other-organisation-dropdown">
                  Organisation
                </label>
                <div class="autocomplete-wrapper autocomplete-wrapper-organisations ">

                  <select class="autocomplete__organisations" name="organisationId" id="parent" required>
                    <option value="" selected></option>
                    {% for organisation in organisationListForTypeAhead %}
                    <option value={{ organisation.id }}>{{ organisation.formattedName }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
            </div>
            {% endif %}
            <div>
              {{ govukButton({
                text: "Select courses",
                preventDoubleClick: true
              }) }}
            </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block bodyEnd %}
<script src="/govuk-frontend/all.js"></script>
<script>window.GOVUKFrontend.initAll()</script>
<script type="text/javascript" src="/js/accessible-autocomplete.min.js"></script>
<script type="text/javascript" src="/js/manage-orgs.js"></script>
{% endblock %}